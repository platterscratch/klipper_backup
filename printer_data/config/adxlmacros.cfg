[gcode_macro RUN_RESONANCE_TEST]
description: "Runs resonance test using KUSBA ADXL345"
gcode:
    ACCELEROMETER_QUERY
    SHAPER_CALIBRATE

[gcode_macro CHECK_ADXL]
description: "Returns live accelerometer data from KUSBA"
gcode:
    ACCELEROMETER_QUERY

[gcode_macro SHAPER_X_ONLY]
description: "Runs input shaping calibration on X axis and saves results"
gcode:
    SHAPER_CALIBRATE AXIS=X
    SAVE_CONFIG

[gcode_macro SHAPER_Y_ONLY]
description: "Runs input shaping calibration on Y axis and saves results"
gcode:
    SHAPER_CALIBRATE AXIS=Y
    SAVE_CONFIG

[gcode_macro KUSBA_PROMPT]
description: "Shows a prompt in Mainsail to confirm resonance test"
gcode:
    RESPOND TYPE=command MSG="action:prompt_begin KUSBA Resonance Test"
    RESPOND TYPE=command MSG="action:prompt_text Run SHAPER_CALIBRATE?"
    RESPOND TYPE=command MSG="action:prompt_button YES|SHAPER_CALIBRATE|primary"
    RESPOND TYPE=command MSG="action:prompt_button NO|RESPOND TYPE=command MSG='action:prompt_end'|secondary"
    RESPOND TYPE=command MSG="action:prompt_show"

